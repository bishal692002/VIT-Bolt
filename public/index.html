<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>VIT-Bolt ‚Äì Campus Food Delivery for VIT Bhopal</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Existing VIT-Bolt CSS and Components -->
  <link rel="stylesheet" href="/css/tailwind.css" />
  <link rel="stylesheet" href="/css/ui-fixes.css" />
  <!-- Shoelace Web Components (light theme) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.0/cdn/themes/light.css" />
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.0/cdn/shoelace-autoloader.js"></script>
  <!-- w2ui (optional grid) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/w2ui/1.5/w2ui.min.css" integrity="sha512-SgkSg0z6g8YxgQj4i6r2t7G4bK4T1b2zQeS9pC6XwK7m7gQ9cJg1S7XvQ2+v8r2b9Z3W6GmY9o6o8Qm9t7o7Vw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'poppins': ['Poppins', 'sans-serif']
          },
          colors: {
            'brand-yellow': '#F59E0B',
            'brand-dark': '#D97706',
            'brand-light': '#FCD34D'
          }
        }
      }
    }
  </script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
    }

    /* Smooth Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-25px) rotate(8deg);
      }
    }

    @keyframes floatSlow {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-20px) rotate(-5deg);
      }
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .animate-fade-in-up {
      animation: fadeInUp 0.8s ease-out forwards;
    }

    .animate-slide-in-left {
      animation: slideInLeft 0.8s ease-out forwards;
    }

    .animate-slide-in-right {
      animation: slideInRight 0.8s ease-out forwards;
    }

    /* Floating Food Icons */
    .food-float {
      position: absolute;
      animation: float 6s ease-in-out infinite;
      filter: drop-shadow(0 10px 20px rgba(245, 158, 11, 0.3));
    }

    .food-float-slow {
      position: absolute;
      animation: floatSlow 8s ease-in-out infinite;
      filter: drop-shadow(0 10px 20px rgba(245, 158, 11, 0.3));
    }

    /* Hero Background */
    .hero-bg {
      background: linear-gradient(135deg, #FFFBEB 0%, #FEF3C7 50%, #FDE68A 100%);
      position: relative;
    }

    .hero-bg::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(245, 158, 11, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(217, 119, 6, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }

    /* Wave Pattern */
    .wave-pattern {
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 100%;
      overflow: hidden;
      line-height: 0;
    }

    .wave-pattern svg {
      position: relative;
      display: block;
      width: calc(100% + 1.3px);
      height: 80px;
    }

    /* Card Hover Effects */
    .feature-card {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      background: white;
      border: 2px solid transparent;
    }

    .feature-card:hover {
      transform: translateY(-12px) scale(1.02);
      box-shadow: 0 25px 50px -12px rgba(245, 158, 11, 0.25);
      border-color: rgba(245, 158, 11, 0.3);
    }

    /* Button Styles */
    .btn-primary {
      background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
      box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
      transition: all 0.3s ease;
    }

    .btn-primary:hover {
      box-shadow: 0 15px 40px rgba(245, 158, 11, 0.5);
      transform: translateY(-3px);
    }

    .btn-primary:active {
      transform: translateY(-1px) scale(0.98);
    }

    /* Nav Link Underline Effect */
    .nav-link {
      position: relative;
      transition: color 0.3s ease;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 50%;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, #F59E0B, #D97706);
      border-radius: 2px;
      transition: all 0.3s ease;
      transform: translateX(-50%);
    }

    .nav-link:hover::after {
      width: 100%;
    }

    /* Modal Overlay */
    .login-modal::part(panel) {
      max-width: 500px;
      border-radius: 24px;
      overflow: hidden;
      z-index: 50;
    }
    
    .login-modal::part(overlay) {
      backdrop-filter: blur(8px);
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 50;
    }

    /* Style the Login / Sign up header */
    .login-modal::part(header) {
      background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
      color: white;
      text-align: center;
      padding: 1.5rem;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .login-modal::part(title) {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 0;
      text-align: center;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* VIT-Bolt Integration Styles */
    .login-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(245, 158, 11, 0.1);
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(245, 158, 11, 0.1);
    }

    /* Step Cards */
    .step-card {
      background: white;
      transition: all 0.4s ease;
    }

    .step-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(245, 158, 11, 0.15);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .food-float, .food-float-slow {
        font-size: 2rem !important;
        opacity: 0.6;
      }

      .wave-pattern svg {
        height: 50px;
      }
    }
  </style>
</head>
<body class="bg-gray-50">

  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-lg shadow-sm z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-20">

        <!-- Logo -->
        <div class="flex items-center space-x-3">
          <div class="text-4xl">üçî</div>
          <div>
            <h1 class="text-2xl font-bold text-gray-900">VIT-Bolt</h1>
            <p class="text-xs text-gray-600 -mt-1">Order fast. Eat fresh. Campus only.</p>
          </div>
        </div>

        <!-- Navigation -->
        <nav class="hidden md:flex items-center space-x-8">
          <a href="/vendor-application.html" class="nav-link text-sm font-semibold text-gray-700 hover:text-brand-yellow pb-1">Partner with Us</a>
          <a href="/check-status.html" class="nav-link text-sm font-semibold text-gray-700 hover:text-brand-yellow pb-1">Check Status</a>
        </nav>

        <!-- Right Buttons -->
        <div class="flex items-center space-x-3">
          <!-- Logged In User Profile -->
          <div id="nav-auth" class="hidden items-center gap-3">
            <span id="navUser" class="text-sm text-gray-600 font-medium"></span>
            <sl-dropdown>
              <sl-button slot="trigger" caret size="small" variant="default">
                <sl-icon name="person-circle" slot="prefix"></sl-icon>
                My Account
              </sl-button>
              <sl-menu id="userMenu">
                <!-- Role-specific menu items will be populated by JavaScript -->
              </sl-menu>
            </sl-dropdown>
          </div>
          <!-- Login/Signup Button (shown when not logged in) -->
          <button id="loginBtn" onclick="document.getElementById('loginModal').show()" class="btn-primary px-6 py-2.5 text-sm font-bold text-white rounded-full">
            Sign In / Login
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero-bg pt-32 pb-24 sm:pt-40 sm:pb-32 relative overflow-hidden">

    <!-- Floating Food Icons -->
    <div class="food-float" style="top: 15%; left: 8%; font-size: 4rem; animation-delay: 0s;">üçî</div>
    <div class="food-float-slow" style="top: 25%; right: 10%; font-size: 3.5rem; animation-delay: 1s;">üçï</div>
    <div class="food-float" style="top: 50%; left: 5%; font-size: 3rem; animation-delay: 2s;">ü•ü</div>
    <div class="food-float-slow" style="top: 65%; right: 12%; font-size: 3.8rem; animation-delay: 0.5s;">üåÆ</div>
    <div class="food-float" style="top: 75%; left: 15%; font-size: 2.8rem; animation-delay: 1.5s;">üçú</div>
    <div class="food-float-slow" style="top: 35%; right: 20%; font-size: 4.2rem; animation-delay: 0.8s;">ü•ó</div>
    <div class="food-float" style="bottom: 15%; right: 8%; font-size: 3.2rem; animation-delay: 1.2s;">üçü</div>
    <div class="food-float-slow" style="top: 55%; left: 18%; font-size: 3rem; animation-delay: 2.5s;">üåØ</div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <div class="text-center max-w-4xl mx-auto">

        <!-- Main Heading -->
        <h2 class="text-5xl sm:text-6xl lg:text-7xl font-black text-gray-900 leading-tight mb-6 animate-fade-in-up">
          Order food in minutes<br>
          <span class="text-brand-yellow">only for VIT Bhopal.</span>
        </h2>

        <!-- Subheading -->
        <p class="text-xl sm:text-2xl text-gray-700 font-medium mb-10 animate-fade-in-up" style="animation-delay: 0.2s;">
          Fast, reliable, and campus-exclusive food delivery<br class="hidden sm:block"> connecting you with on-campus vendors.
        </p>

        <!-- CTA Button -->
        <div class="animate-fade-in-up" style="animation-delay: 0.4s;">
          <button id="ctaButton" onclick="handleOrderNow()" class="btn-primary inline-flex items-center px-10 py-5 text-lg font-bold text-white rounded-full group">
            <span id="ctaText">Order Now</span>
            <svg class="ml-3 w-6 h-6 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Wave Pattern -->
    <div class="wave-pattern">
      <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#ffffff"></path>
      </svg>
    </div>
  </section>

  <!-- Feature Cards Section -->
  <section class="py-20 bg-white relative">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">

        <!-- Card 1 -->
        <div class="feature-card rounded-3xl p-8 shadow-lg animate-fade-in-up" style="animation-delay: 0.1s;">
          <div class="w-20 h-20 mx-auto bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center text-4xl mb-6 transform rotate-3">
            üçî
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">7+ Campus Vendors</h3>
          <p class="text-gray-600 text-center leading-relaxed">Verified outlets inside campus.</p>
        </div>

        <!-- Card 2 -->
        <div class="feature-card rounded-3xl p-8 shadow-lg animate-fade-in-up" style="animation-delay: 0.2s;">
          <div class="w-20 h-20 mx-auto bg-gradient-to-br from-orange-400 to-amber-500 rounded-2xl flex items-center justify-center text-4xl mb-6 transform -rotate-3">
            üö¥
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Fast Delivery</h3>
          <p class="text-gray-600 text-center leading-relaxed">Delivered directly to hostels.</p>
        </div>

        <!-- Card 3 -->
        <div class="feature-card rounded-3xl p-8 shadow-lg animate-fade-in-up" style="animation-delay: 0.3s;">
          <div class="w-20 h-20 mx-auto bg-gradient-to-br from-amber-500 to-orange-400 rounded-2xl flex items-center justify-center text-4xl mb-6 transform rotate-2">
            üí∞
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Low Delivery Fees</h3>
          <p class="text-gray-600 text-center leading-relaxed">Starting at ‚Çπ15.</p>
        </div>

        <!-- Card 4 -->
        <div class="feature-card rounded-3xl p-8 shadow-lg animate-fade-in-up" style="animation-delay: 0.4s;">
          <div class="w-20 h-20 mx-auto bg-gradient-to-br from-orange-500 to-amber-400 rounded-2xl flex items-center justify-center text-4xl mb-6 transform -rotate-2">
            üìç
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Campus-Exclusive</h3>
          <p class="text-gray-600 text-center leading-relaxed">Available only within VIT Bhopal.</p>
        </div>

      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="py-20 bg-gradient-to-b from-white to-amber-50">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">

      <h2 class="text-4xl sm:text-5xl font-black text-center text-gray-900 mb-16 animate-fade-in-up">
        How It Works?
      </h2>

      <div class="grid md:grid-cols-3 gap-8">

        <!-- Step 1 -->
        <div class="step-card rounded-2xl p-8 shadow-lg animate-slide-in-left" style="animation-delay: 0.1s;">
          <div class="flex items-center justify-center w-16 h-16 bg-brand-yellow text-white rounded-full text-2xl font-black mb-6 mx-auto">
            1
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Browse Vendors</h3>
          <p class="text-gray-600 text-center leading-relaxed">Choose from your favorite outlets on campus.</p>
        </div>

        <!-- Step 2 -->
        <div class="step-card rounded-2xl p-8 shadow-lg animate-fade-in-up" style="animation-delay: 0.2s;">
          <div class="flex items-center justify-center w-16 h-16 bg-brand-yellow text-white rounded-full text-2xl font-black mb-6 mx-auto">
            2
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Place Order</h3>
          <p class="text-gray-600 text-center leading-relaxed">Checkout securely in seconds.</p>
        </div>

        <!-- Step 3 -->
        <div class="step-card rounded-2xl p-8 shadow-lg animate-slide-in-right" style="animation-delay: 0.3s;">
          <div class="flex items-center justify-center w-16 h-16 bg-brand-yellow text-white rounded-full text-2xl font-black mb-6 mx-auto">
            3
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Enjoy Your Meal</h3>
          <p class="text-gray-600 text-center leading-relaxed">Delivered fresh to your hostel.</p>
        </div>

      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-gray-300 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <p class="text-lg font-semibold">¬© 2025 VIT-Bolt ‚Äì Campus-exclusive service (Prototype)</p>
      </div>
    </div>
  </footer>

  <!-- VIT-Bolt Login Modal (Shoelace) -->
  <sl-dialog id="loginModal" label="Login / Sign up" class="login-modal">
    <div class="p-8">
      <h2 class="text-2xl font-bold mb-6 text-center text-brand-yellow">Account Access</h2>
      <form id="authForm" class="space-y-5">
        <div id="nameField" class="hidden">
          <label class="block text-sm font-semibold mb-2 text-gray-700">Name</label>
          <input type="text" name="name" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-yellow focus:outline-none transition-colors" />
        </div>
        <div>
          <label class="block text-sm font-semibold mb-2 text-gray-700">Email</label>
          <input type="email" name="email" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-yellow focus:outline-none transition-colors" placeholder="your.email@vitbhopal.ac.in" />
        </div>
        <div>
          <label class="block text-sm font-semibold mb-2 text-gray-700">Password</label>
          <input type="password" name="password" required minlength="6" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-yellow focus:outline-none transition-colors" placeholder="Enter your password" />
        </div>
        <div id="roleField">
          <label class="block text-sm font-semibold mb-2 text-gray-700">Account Type</label>
          <select name="role" id="roleSelect" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-yellow focus:outline-none transition-colors text-sm">
            <option value="student" selected>Student</option>
            <option value="delivery">Delivery Rider</option>
          </select>
          <p class="text-xs text-gray-500 mt-2">Vendors are created by admin only.</p>
        </div>
        <button class="w-full btn-primary font-bold py-4 rounded-xl transition-all duration-300" id="submitBtn">Login</button>
        <p class="text-sm text-center text-gray-600"> 
          <span id="toggleMode" class="text-brand-yellow cursor-pointer font-medium hover:text-brand-dark transition-colors">Need an account? Sign up</span>
        </p>
        <p id="authMsg" class="text-sm text-center text-red-500"></p>
      </form>
    </div>
  </sl-dialog>

  <!-- About Modal -->
  <sl-dialog id="aboutDialog" label="About VIT-Bolt" class="max-w-xl">
    <div class="space-y-3 text-gray-700 leading-relaxed">
      <p>VIT-Bolt is a campus-exclusive food delivery platform for VIT Bhopal, connecting students with on-campus vendors with fast and reliable delivery.</p>
      <p>Flat delivery fee ‚Çπ15, rider earnings ‚Çπ10 per delivery. Payments are securely processed via Razorpay.</p>
    </div>
    <sl-button slot="footer" variant="primary" onclick="this.closest('sl-dialog').hide()">Close</sl-button>
  </sl-dialog>

  <!-- VIT-Bolt Scripts -->
  <script src="/js/transitions.js"></script>
  <script src="/js/auth.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/w2ui/1.5/w2ui.min.js" integrity="sha512-xVtA6zzH8G/1i2b9H0rQDXlto7VQf7XQXqzC9w7N4mQ4sQk6s5U3o8N3VYjzq1+1XGq1mYJ1/0D1A8r8s4YdNw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="/js/home.js"></script>
  <!-- VanJS (reactive vanilla JS) -->
  <script src="https://cdn.jsdelivr.net/gh/vanjs-org/van/public/van-1.5.0.min.js"></script>

  <!-- Enhanced UI Scripts -->
  <script>
    // Role-based UI Management
    function updateUIForLoggedInUser(user) {
      const navAuth = document.getElementById('nav-auth');
      const loginBtn = document.getElementById('loginBtn');
      const navUser = document.getElementById('navUser');
      const userMenu = document.getElementById('userMenu');
      const ctaButton = document.getElementById('ctaButton');
      const ctaText = document.getElementById('ctaText');

      if (user && user.email) {
        // Hide login button, show user profile
        loginBtn.style.display = 'none';
        navAuth.classList.remove('hidden');
        navAuth.classList.add('flex');
        
        // Update user display
        navUser.textContent = user.name || user.email.split('@')[0];
        
        // Clear existing menu items
        userMenu.innerHTML = '';
        
        // Add role-specific menu items
        if (user.role === 'student') {
          userMenu.innerHTML = `
            <sl-menu-item onclick="location.href='/student.html'">
              <sl-icon name="person" slot="prefix"></sl-icon>
              Student Dashboard
            </sl-menu-item>
            <sl-menu-item onclick="location.href='/menu.html'">
              <sl-icon name="grid-3x3-gap" slot="prefix"></sl-icon>
              Browse Menu
            </sl-menu-item>
            <sl-menu-item onclick="location.href='/track.html'">
              <sl-icon name="geo-alt" slot="prefix"></sl-icon>
              Track Orders
            </sl-menu-item>
            <sl-divider></sl-divider>
            <sl-menu-item id="logoutBtn">
              <sl-icon name="box-arrow-right" slot="prefix"></sl-icon>
              Logout
            </sl-menu-item>
          `;
          
          // Update CTA button for students
          ctaText.textContent = 'Browse Menu';
          ctaButton.onclick = () => location.href = '/menu.html';
          
        } else if (user.role === 'delivery') {
          userMenu.innerHTML = `
            <sl-menu-item onclick="location.href='/rider.html'">
              <sl-icon name="bicycle" slot="prefix"></sl-icon>
              Rider Dashboard
            </sl-menu-item>
            <sl-divider></sl-divider>
            <sl-menu-item id="logoutBtn">
              <sl-icon name="box-arrow-right" slot="prefix"></sl-icon>
              Logout
            </sl-menu-item>
          `;
          
          // Update CTA button for delivery riders
          ctaText.textContent = 'Go to Dashboard';
          ctaButton.onclick = () => location.href = '/rider.html';
          
        } else if (user.role === 'vendor') {
          userMenu.innerHTML = `
            <sl-menu-item onclick="location.href='/vendor.html'">
              <sl-icon name="shop" slot="prefix"></sl-icon>
              Vendor Dashboard
            </sl-menu-item>
            <sl-divider></sl-divider>
            <sl-menu-item id="logoutBtn">
              <sl-icon name="box-arrow-right" slot="prefix"></sl-icon>
              Logout
            </sl-menu-item>
          `;
          
          // Update CTA button for vendors
          ctaText.textContent = 'Manage Store';
          ctaButton.onclick = () => location.href = '/vendor.html';
        }
        
        // Add logout functionality
        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) {
          logoutBtn.addEventListener('click', handleLogout);
        }
        
      } else {
        // Show login button, hide user profile
        loginBtn.style.display = 'block';
        navAuth.classList.add('hidden');
        navAuth.classList.remove('flex');
        
        // Reset CTA button
        ctaText.textContent = 'Order Now';
        ctaButton.onclick = handleOrderNow;
      }
    }

    // Handle Order Now button click
    function handleOrderNow() {
      // Check if user is logged in
      const currentUser = window.auth?.getCurrentUser?.();
      if (currentUser) {
        // Redirect based on user role
        if (currentUser.role === 'student') {
          location.href = '/menu.html';
        } else if (currentUser.role === 'delivery') {
          location.href = '/rider.html';
        } else if (currentUser.role === 'vendor') {
          location.href = '/vendor.html';
        }
      } else {
        // Show login modal
        document.getElementById('loginModal').show();
      }
    }

    // Handle logout
    function handleLogout() {
      if (window.auth?.logout) {
        window.auth.logout();
        updateUIForLoggedInUser(null);
        location.reload(); // Refresh to reset the page state
      }
    }

    // Listen for auth state changes
    function initializeAuthState() {
      if (window.auth) {
        // Check current auth state
        const currentUser = window.auth.getCurrentUser?.();
        updateUIForLoggedInUser(currentUser);
        
        // Listen for auth changes
        if (window.auth.onAuthStateChange) {
          window.auth.onAuthStateChange((user) => {
            updateUIForLoggedInUser(user);
          });
        }
      } else {
        // Auth not loaded yet, try again in a bit
        setTimeout(initializeAuthState, 500);
      }
    }

    // Smooth Scroll for Navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Enhanced scroll-triggered animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, observerOptions);
    
    // Initialize animations and functionality
    document.addEventListener('DOMContentLoaded', () => {
      const animatedElements = document.querySelectorAll('.animate-fade-in-up, .animate-slide-in-left, .animate-slide-in-right');
      animatedElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(40px)';
        el.style.transition = 'opacity 1s ease, transform 1s ease';
        observer.observe(el);
      });
      
      // Add premium hover effects to cards
      const cards = document.querySelectorAll('.feature-card, .step-card');
      cards.forEach(card => {
        card.addEventListener('mouseenter', () => {
          card.style.transform = 'translateY(-8px) scale(1.02)';
        });
        card.addEventListener('mouseleave', () => {
          card.style.transform = 'translateY(0) scale(1)';
        });
      });

      // Initialize auth state
      initializeAuthState();
    });
  </script>

</body>
</html>
